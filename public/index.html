<!DOCTYPE html>
<html>
  <head>
    <title>Computer Graphics</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <iframe id="iframe" class="slide"></iframe>
      <div class="controls">
        <button id="button-previous">Previous</button>
        <button id="button-next">Next</button>
      </div>
    </div>
    <script>
      window.onload = function (e) {
        fetch('/slides').then(res => res.json()).then(slides => {
          const iframe = document.getElementById('iframe')
          const buttonPrevious = document.getElementById('button-previous')
          const buttonNext = document.getElementById('button-next')

          let currentSlide = 0

          if (window.location.hash) {
            currentSlide = window.location.hash.substring(1)
          }

          buttonPrevious.onclick = function (e) {
            if (currentSlide > 0) {
              currentSlide--
              iframe.src = `/slides/${currentSlide}`
              window.location.hash = currentSlide
            }
          }

          buttonNext.onclick = function (e) {
            if (currentSlide < slides.length - 1) {
              currentSlide++
              iframe.src = `/slides/${currentSlide}`
              window.location.hash = currentSlide
            }
          }

          iframe.src = `/slides/${currentSlide}`
          window.location.hash = currentSlide
        });
      }
    </script>
  </body>
</html>
