<!DOCTYPE html>
<html>
  <head>
    <title>Computer Graphics</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <iframe id="iframe" class="slide"></iframe>
      <div class="controls">
        <button id="button-previous">Previous</button>
        <button id="button-next">Next</button>
      </div>
    </div>
    <script>
      window.onload = function (e) {
        fetch('/slides').then(res => res.json()).then(slides => {
          const iframe = document.getElementById('iframe')
          const buttonPrevious = document.getElementById('button-previous')
          const buttonNext = document.getElementById('button-next')

          const slideUrl = (slide) => `/slides/${slide}`
          let currentSlide = 0

          if (window.location.hash) {
            const index = slides.indexOf(window.location.hash.substring(1))

            if (index > 0) {
              currentSlide = index
            }
          }

          buttonPrevious.onclick = function (e) {
            if (currentSlide > 0) {
              currentSlide--
              iframe.src = slideUrl(slides[currentSlide])
              window.location.hash = slides[currentSlide]
            }
          }

          buttonNext.onclick = function (e) {
            if (currentSlide < slides.length - 1) {
              currentSlide++
              iframe.src = slideUrl(slides[currentSlide])
              window.location.hash = slides[currentSlide]
            }
          }

          iframe.src = slideUrl(slides[currentSlide])
          window.location.hash = slides[currentSlide]
        });
      }
    </script>
  </body>
</html>
